!function(a){a.fn.dhSmartSidebar=function(t){var s={_main_content:a(".main-wrap")},t=a.extend(s,t);if(t._main_content=a(t._main_content),!t._main_content.length)return!1;var e=function(){return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)&&!!window.navigator.maxTouchPoints};return e()?void 0:this.each(function(){var s,e=a(this),i="",n=(e.width(),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),function(){var a=window,t="inner";return"innerWidth"in window||(t="client",a=document.documentElement||document.body),{width:a[t+"Width"],height:a[t+"Height"]}}),d=function(a,t){return 1<=Math.abs(a-t)?t>a?!0:!1:!0},o=function(a,t){return 1<=Math.abs(a-t)&&t>a?!0:!1},c=function(){if(e.data("sidebar_is_enabled")){var c=a(window).scrollTop(),r=n().height,u=0,h="",f=a(".header-container");f.hasClass("header-navbar-fixed")&&(u=60);var w=0;a("body").hasClass("admin-bar")&&(w=a("#wpadminbar").outerHeight()),u+=w,c!=s&&(h=c>s?"down":"up"),s=c,c+=u;var b=t._main_content.offset().top,m=t._main_content.outerHeight(),p=m,l=b+m,g=e.offset().top,_=e.outerHeight(),v=g+_;"-175px"==t._main_content.css("margin-top")&&(b+=175),_>=p?i="6":r>_?i=d(c,b)?"2":!0===o(v,c)?o(c,l-_)?"4":"3":d(l,v)?"up"==h&&d(c,g)?"4":"3":l-c>=_?"4":"3":(!0===o(v,c)?i="3":!0===o(v,c+r)&&!0===o(v,l)&&"down"==h&&l>=c+r?i="1":!0===d(g,b)&&"up"==h&&l>=c+r?i="2":!0===d(l,v)&&"down"==h||c+r>l?i="3":!0===d(c,g)&&"up"==h&&!0===d(b,c)&&(i="4"),("1"==i&&"up"==h||"4"==i&&"down"==h)&&(i="5"));var x=Math.max(e.data("fix-width"),200);switch(i){case"1":if(1===e.data("s-case-1"))break;e.data("s-case-1",1),e.data("s-case-2",0),e.data("s-case-3",0),e.data("s-case-4",0),e.data("s-case-5",0),e.data("s-case-6",0),e.css({width:x,position:"fixed",top:"auto",bottom:"0","z-index":"1"});break;case"2":if(1===e.data("s-case-2"))break;e.data("s-case-1",0),e.data("s-case-2",1),e.data("s-case-3",0),e.data("s-case-4",0),e.data("s-case-5",0),e.data("s-case-6",0),e.css({width:"auto",position:"static",top:"auto",bottom:"auto"});break;case"3":if(1===e.data("s-case-3")&&e.data("last-sidebar-height")==_&&e.data("last-content-height")==m)break;e.data("s-case-1",0),e.data("s-case-2",0),e.data("s-case-3",1),e.data("last-sidebar-height",_),e.data("last-content-height",m),e.data("s-case-4",0),e.data("s-case-5",0),e.data("s-case-6",0),e.css({width:x,position:"absolute",top:l-_-b,bottom:"auto"});break;case"4":if(1===e.data("s-case-4")&&e.data("last-menu-offset")==u)break;e.data("s-case-1",0),e.data("s-case-2",0),e.data("s-case-3",0),e.data("s-case-4",1),e.data("last-menu-offset",u),e.data("s-case-5",0),e.data("s-case-6",0),e.css({width:x,position:"fixed",top:u,bottom:"auto"});break;case"5":if(1===e.data("s-case-5"))break;e.data("s-case-1",0),e.data("s-case-2",0),e.data("s-case-3",0),e.data("s-case-4",0),e.data("s-case-5",1),e.data("s-case-6",0),e.css({width:x,position:"absolute",top:g-b,bottom:"auto"});break;case"6":if(1===e.data("s-case-6"))break;e.data("s-case-1",0),e.data("s-case-2",0),e.data("s-case-3",0),e.data("s-case-4",0),e.data("s-case-5",0),e.data("s-case-6",1),e.css({width:"auto",position:"static",top:"auto",bottom:"auto"})}}},r=function(){var a=0;a=n().width,a>=992?(e.data("fix-width",e.parent().width()),e.data("sidebar_is_enabled",1),c()):(e.data("fix-width",0),e.data("sidebar_is_enabled",0),e.data("s-case-1",0),e.data("s-case-2",0),e.data("s-case-3",0),e.data("s-case-4",0),e.data("s-case-5",0),e.data("s-case-6",0),e.data("last-menu-offset",0),e.data("last-sidebar-height",0),e.data("last-content-height",0),e.css({width:"auto",position:"static",top:"auto",bottom:"auto"}))};return a(window).bind("resize",function(){r()}),a(window).scroll(function(){window.requestAnimationFrame?window.requestAnimationFrame(function(){c()},document):c()}),setTimeout(function(){r()},100),!0})}}(jQuery);