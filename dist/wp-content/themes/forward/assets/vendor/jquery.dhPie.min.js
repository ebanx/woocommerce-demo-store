!function(t){function i(i,s){this.el=i,this.$el=t(this.el),this.options=t.extend({color:"#f7f7f7",units:"",label_selector:".dh-pie-value",back_selector:".dh-pie-back",border:10,responsive:!0},s),this.init()}i.prototype={constructor:i,_progress_v:0,animated:!1,init:function(){this.color=this.options.color,this.value=this.$el.data("pie-value")/100,this.label_value=this.$el.data("pie-label-value")||this.$el.data("pie-value"),this.$wrapper=t(".dh-pie-wrap",this.$el),this.$label=t(this.options.label_selector,this.$el),this.$back=t(this.options.back_selector,this.$el),this.$canvas=this.$el.find("canvas"),this.draw(),this.setWayPoint(),!0===this.options.responsive&&this.setResponsive()},setResponsive:function(){var i=this;t(window).resize(function(){!0===i.animated&&i.circle.stop(),i.draw(!0)})},draw:function(i){var s,e=this.$el.addClass("dh-ready").width(),a=this.options.border;e||(e=this.$el.parents(":visible").first().width()-2),e=e/100*80,s=e/2-a-1,this.$wrapper.css({width:e+"px"}),this.$label.css({width:e,height:e,"line-height":e+"px"}),this.$back.css({width:e,height:e}),this.$canvas.attr({width:e+"px",height:e+"px"}),this.$el.addClass("dh-ready"),this.circle=new ProgressCircle({canvas:this.$canvas.get(0),minRadius:s,arcWidth:a}),!0===i&&!0===this.animated&&(this._progress_v=this.value,this.circle.addEntry({fillColor:this.color,progressListener:t.proxy(this.setProgress,this)}).start())},setProgress:function(){if(this._progress_v>=this.value)return this.circle.stop(),this.$label.find("span").text(this.label_value),this._progress_v;this._progress_v+=.005;var t=this._progress_v/this.value*this.label_value,i=Math.round(t);return this.$label.find("span").text(i),this._progress_v},animate:function(){!0!==this.animated&&(this.animated=!0,this.circle.addEntry({fillColor:this.color,progressListener:t.proxy(this.setProgress,this)}).start(5))},setWayPoint:function(){"undefined"!=typeof t.fn.waypoint?this.$el.waypoint(t.proxy(this.animate,this),{offset:"85%"}):this.animate()}},t.fn.dhPie=function(s,e){return this.each(function(){var a=t(this),h=a.data("vc_chart"),r="object"==typeof s?s:{color:a.data("pie-color"),units:a.data("pie-units"),border:a.data("border-width")};"undefined"==typeof s&&a.data("vc_chart",h=new i(this,r)),"string"==typeof s&&h[s](e)})},window.dhPieChart=function(){t(".dh-pie:visible").dhPie()},t(document).ready(function(){dhPieChart()})}(window.jQuery);